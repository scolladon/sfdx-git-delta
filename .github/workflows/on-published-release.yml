---
name: Published release communication

on:
  release:
    types:
      - published

permissions: # required if repository sets restricted permissions for token, see https://docs.github.com/en/actions/security-for-github-actions/security-guides/automatic-token-authentication#permissions-for-the-github_token
  issues: write # required if active on issues
  pull-requests: write # required if active on pull requests

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: apexskier/github-release-commenter@v1
        with:
          GITHUB_TOKEN: ${{ github.token }}
          comment-template: |
            Shipped in [release `{release_tag}`]({release_link}).
            Version `{release_tag}` will be assigned to the `latest` npm channel soon
            Install it using either `{release_tag}` or the `latest-rc` npm channel
            ```sh
            $ sf plugins install sfdx-git-delta@latest-rc
            # Or
            $ sf plugins install sfdx-git-delta@{release_tag}
            ```
            ðŸ’¡ Enjoying sfdx-git-delta?
            Your contribution helps us provide fast support ðŸš€ and high quality features ðŸ”¥
            Become a [sponsor](https://github.com/sponsors/scolladon) ðŸ’™
            Happy incremental deployment!
